<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviesFlix - Ultimate Experience</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Oswald:wght@500;700&display=swap"
        rel="stylesheet">
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --primary-red: #e50914;
            --primary-gradient: linear-gradient(135deg, #e50914 0%, #8b0000 100%);
            --bg-dark: #141414;
            --bg-card: #1f1f1f;
            --text-white: #ffffff;
            --text-gray: #b3b3b3;
            --header-height: 68px;
            --transition-speed: 0.3s;
            --shadow-glow: 0 0 20px rgba(229, 9, 20, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-white);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        a {
            text-decoration: none;
            color: inherit;
            transition: var(--transition-speed);
        }

        ul {
            list-style: none;
        }

        button {
            cursor: pointer;
            border: none;
            outline: none;
            font-family: inherit;
            background: none;
        }

        /* --- ANIMATIONS --- */
        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }

            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- HEADER --- */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            height: var(--header-height);
            padding: 0 4%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
            background: linear-gradient(to bottom, rgba(20, 20, 20, 0.9) 0%, rgba(20, 20, 20, 0) 100%);
            backdrop-filter: blur(5px);
            transition: background-color 0.4s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            will-change: background-color;
        }

        header.scrolled {
            background-color: #141414;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .logo {
            font-family: 'Oswald', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-red);
            letter-spacing: 1px;
            text-transform: uppercase;
            text-shadow: 0 0 20px rgba(229, 9, 20, 0.5);
            margin-right: 10px;
        }

        .nav-links {
            display: flex;
            gap: 25px;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-links li a {
            color: #e5e5e5;
            transition: 0.2s;
            position: relative;
        }

        .nav-links li a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-red);
            transition: width 0.3s;
        }

        .nav-links li a:hover::after,
        .nav-links li a.active::after {
            width: 100%;
        }

        .nav-links li a:hover,
        .nav-links li a.active {
            color: #fff;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* Search */
        .search-box {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 5px 10px;
            transition: all 0.3s;
            border-radius: 20px;
        }

        .search-box:hover,
        .search-box.active {
            border-color: #fff;
            background: rgba(0, 0, 0, 0.8);
        }

        .search-box input {
            background: transparent;
            border: none;
            color: white;
            width: 0;
            opacity: 0;
            transition: all 0.3s;
            outline: none;
            font-family: 'Inter';
        }

        .search-box.active input {
            width: 200px;
            opacity: 1;
            padding-left: 10px;
        }

        .search-icon {
            color: white;
            cursor: pointer;
        }

        /* Notifications */
        .notification-btn {
            position: relative;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .notification-btn:hover {
            transform: scale(1.1);
            color: var(--primary-red);
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            width: 8px;
            height: 8px;
            background-color: var(--primary-red);
            border-radius: 50%;
            border: 1px solid #141414;
        }

        /* Profile */
        .profile-container {
            position: relative;
        }

        .profile-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            object-fit: cover;
            border: 2px solid transparent;
            transition: 0.3s;
        }

        .profile-icon:hover {
            border-color: var(--primary-red);
        }

        .dropdown-menu {
            position: absolute;
            top: 50px;
            right: -10px;
            width: 260px;
            background-color: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px 0;
            display: none;
            flex-direction: column;
            z-index: 2000;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            animation: fadeUp 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateZ(0);
        }

        .dropdown-menu.active {
            display: flex;
        }

        .profile-info-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 5px;
        }

        .profile-email {
            font-size: 13px;
            color: #b3b3b3;
            margin-top: 5px;
        }

        .dropdown-item {
            padding: 12px 20px;
            font-size: 13px;
            color: #ddd;
            transition: 0.2s;
            text-align: left;
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding-left: 25px;
        }

        .signout-btn {
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            color: #e50914;
            font-weight: 600;
        }

        .signout-btn:hover {
            color: #ff4d4d;
            background: transparent;
        }

        /* --- HERO SECTION --- */
        .hero {
            position: relative;
            height: 90vh;
            width: 100%;
            display: flex;
            align-items: center;
            overflow: hidden;
            transition: height 0.6s ease;
        }

        .hero.hidden {
            display: none;
        }

        .hero-video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            transform: translateZ(0);
        }

        .hero-video-bg iframe {
            width: 100vw;
            height: 56.25vw;
            min-height: 100vh;
            min-width: 177.77vh;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            opacity: 0.6;
        }

        .hero::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, #141414 10%, transparent 40%),
                linear-gradient(to right, rgba(20, 20, 20, 0.9) 0%, rgba(20, 20, 20, 0) 60%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            padding-left: 4%;
            width: 100%;
            max-width: 700px;
            padding-top: 100px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .hero-title {
            font-family: 'Oswald', sans-serif;
            font-size: 5rem;
            line-height: 1;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            background: linear-gradient(to right, #fff, #ccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: fadeUp 0.8s ease-out 0.2s backwards;
        }

        .hero-desc {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            line-height: 1.6;
            color: #fff;
            animation: fadeUp 0.8s ease-out 0.4s backwards;
            max-width: 600px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.9);
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            animation: fadeUp 0.8s ease-out 0.6s backwards;
        }

        .btn {
            padding: 1rem 2.5rem;
            border-radius: 4px;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            will-change: transform;
        }

        .btn-play {
            background: var(--primary-red);
            color: white;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.4);
        }

        .btn-play:hover {
            background: #f40612;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(229, 9, 20, 0.6);
        }

        .btn-more {
            background: rgba(109, 109, 110, 0.6);
            color: white;
            backdrop-filter: blur(5px);
        }

        .btn-more:hover {
            background: rgba(109, 109, 110, 0.8);
        }

        /* --- MAIN CONTENT --- */
        main {
            position: relative;
            z-index: 20;
            margin-top: -120px;
            padding-bottom: 50px;
            transition: margin-top 0.6s;
        }

        main.no-hero {
            margin-top: 80px;
        }

        /* --- SKELETON LOADING --- */
        .skeleton-row {
            margin-bottom: 3vw;
            padding: 0 4%;
        }

        .skeleton-container {
            display: flex;
            gap: 20px;
            overflow: hidden;
        }

        .skeleton-card {
            width: 240px;
            height: 135px;
            background: #222;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .skeleton-card::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.05) 50%, transparent 100%);
            animation: shimmer 1.5s infinite linear;
        }

        /* --- GRID & ROWS --- */
        .grid-view {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px 4%;
            width: 100%;
        }

        .row {
            margin-bottom: 3vw;
            position: relative;
        }

        /* IMPROVED: Attractive Row Header Styling */
        .row-header {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            padding: 0 4%;
            margin-bottom: 15px;
        }

        .row-title {
            font-family: 'Oswald', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            padding-left: 18px;
            line-height: 1;
        }

        .row-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 0%;
            background: var(--primary-red);
            border-radius: 2px;
            transition: height 0.3s ease;
            box-shadow: 0 0 8px var(--primary-red);
        }

        .row-title:hover {
            transform: translateX(5px);
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .row-title:hover::before {
            height: 90%;
        }

        .view-all {
            font-size: 0.85rem;
            color: #54b9f5;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            opacity: 0.7;
            transition: 0.2s;
            cursor: pointer;
            padding-bottom: 2px;
        }

        .view-all:hover {
            opacity: 1;
            gap: 8px;
        }

        .row-container {
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            gap: 20px;
            padding: 20px 4% 60px 4%;
            scroll-behavior: smooth;
            scrollbar-width: none;
            transform: translateZ(0);
        }

        .row-container::before,
        .row-container::after {
            content: "";
            position: absolute;
            top: 0;
            bottom: 60px;
            width: 80px;
            z-index: 50;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .row-container::before {
            left: 0;
            background: linear-gradient(to right, #141414, transparent);
            opacity: 0;
        }

        .row-container::after {
            right: 0;
            background: linear-gradient(to left, #141414, transparent);
            opacity: 1;
        }

        .row-container::-webkit-scrollbar {
            display: none;
        }

        .slider-arrow {
            position: absolute;
            top: 0;
            bottom: 60px;
            width: 4%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            z-index: 100;
            cursor: pointer;
            opacity: 0;
            transition: 0.3s;
            border-radius: 0;
            will-change: opacity;
        }

        .row:hover .slider-arrow {
            opacity: 1;
        }

        .slider-arrow:hover {
            background: rgba(0, 0, 0, 0.9);
            color: var(--primary-red);
            width: 5%;
        }

        .slider-arrow.left {
            left: 0;
            border-top-right-radius: 4px;
            border-bottom-right-radius: 4px;
        }

        .slider-arrow.right {
            right: 0;
            border-top-left-radius: 4px;
            border-bottom-left-radius: 4px;
        }

        /* --- CARDS --- */
        .card {
            flex: 0 0 auto;
            width: 240px;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            border-radius: 4px;
            will-change: transform, box-shadow;
        }

        .card:hover {
            transform: scale(1.08);
            z-index: 99;
            box-shadow: var(--shadow-glow);
        }

        .card img {
            width: 100%;
            height: 135px;
            object-fit: cover;
            border-radius: 4px;
            display: block;
        }

        .card-info {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #181818;
            padding: 15px;
            opacity: 0;
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
            pointer-events: none;
            transition: opacity 0.3s;
            font-size: 0;
            box-shadow: 0 -10px 20px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: none;
        }

        .card:hover .card-info {
            opacity: 1;
            font-size: 13px;
            transform: translateY(-5px);
        }

        .card-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .mini-btn {
            width: 30px;
            height: 30px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(42, 42, 42, 0.6);
            transition: 0.2s;
        }

        .mini-btn.play {
            background: white;
            color: black;
            border: none;
            width: 32px;
            height: 32px;
        }

        .mini-btn:hover {
            border-color: white;
            transform: scale(1.1);
            background: white;
            color: black;
        }

        .card-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #46d369;
            font-weight: bold;
            font-size: 11px;
            margin-bottom: 6px;
        }

        .card-title {
            color: white;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .card-tags {
            color: #fff;
            font-size: 11px;
            display: flex;
            gap: 5px;
        }

        .age-badge {
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 0 4px;
            font-size: 9px;
        }

        .progress-bar-container {
            width: 100%;
            height: 4px;
            background: #333;
            position: absolute;
            bottom: 0;
            left: 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--primary-red);
            width: 0%;
            box-shadow: 0 0 5px var(--primary-red);
        }

        /* --- MODAL (FIXED SECTION) --- */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            backdrop-filter: blur(5px);
        }

        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: #181818;
            width: 90%;
            max-width: 950px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 8px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 1);
            position: relative;
            transform: scale(0.9);
            transition: 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            scrollbar-width: thin;
            scrollbar-color: #555 #181818;
        }

        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: #181818;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background-color: #555;
            border-radius: 4px;
            border: 2px solid #181818;
        }

        .modal-overlay.open .modal-content {
            transform: scale(1);
        }

        .modal-video-wrapper {
            width: 100%;
            padding-top: 56.25%;
            position: relative;
            background: #000;
            flex-shrink: 0;
        }

        .modal-video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 4000;
            transition: 0.2s;
            font-size: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-close:hover {
            background: white;
            color: black;
            transform: rotate(90deg);
            border-color: white;
        }

        .modal-details {
            padding: 40px;
            background: #181818;
            flex-shrink: 0;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 15px;
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            line-height: 1.1;
        }

        .modal-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            font-size: 1.1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .match-score {
            color: #46d369;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(70, 211, 105, 0.3);
        }

        .modal-desc {
            line-height: 1.8;
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        .modal-extra {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            font-size: 15px;
            color: #999;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
        }

        .modal-extra div span {
            color: #ddd;
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        /* Toast */
        #toast {
            position: fixed;
            top: 90px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            color: #141414;
            padding: 15px 30px;
            border-radius: 4px;
            font-weight: 700;
            z-index: 5000;
            opacity: 0;
            transition: 0.3s;
            pointer-events: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            font-family: 'Oswald', sans-serif;
            letter-spacing: 1px;
        }

        #toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(20px);
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-title {
                font-size: 3rem;
            }

            .card:hover {
                transform: none;
            }

            .card-info {
                display: none;
            }

            .modal-content {
                width: 100%;
                height: 100vh;
                max-height: 100vh;
                max-width: none;
                border-radius: 0;
            }

            .modal-details {
                padding: 20px;
            }

            .modal-title {
                font-size: 1.8rem;
            }

            .modal-close {
                width: 48px;
                height: 48px;
                top: 10px;
                right: 10px;
            }

            .row-container {
                gap: 15px;
            }
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header id="navbar">
        <div class="nav-left">
            <div class="logo">Movies<span style="color:white">Flix</span></div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" onclick="handleNav('home', event)">Home</a></li>
                <li><a href="#" class="nav-link" onclick="handleNav('tv', event)">TV Shows</a></li>
                <li><a href="#" class="nav-link" onclick="handleNav('movies', event)">Movies</a></li>
                <li><a href="#" class="nav-link" onclick="handleNav('kids', event)">Kids</a></li>
                <li><a href="#" class="nav-link" onclick="handleNav('telugu', event)">Telugu</a></li>
                <li><a href="#" class="nav-link" onclick="handleNav('hindi', event)">Hindi</a></li>
            </ul>
        </div>

        <div class="nav-right">
            <!-- Search -->
            <div class="search-box" id="searchBox">
                <input type="text" id="searchInput" placeholder="Titles, people, genres">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" onclick="toggleSearch()">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>

            <!-- Notifications -->
            <button class="notification-btn">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span class="notification-badge"></span>
            </button>

            <!-- Profile -->
            <div class="profile-container">
                <img src="https://picsum.photos/seed/user123/200/200" alt="Profile" class="profile-icon"
                    onclick="toggleDropdown()">
                <div class="dropdown-menu" id="profileDropdown">
                    <div class="profile-info-header">
                        <div style="display:flex; align-items:center; gap:10px; margin-bottom:5px;">
                            <img src="https://picsum.photos/seed/user123/200/200"
                                style="width:40px; height:40px; border-radius:6px; border:2px solid var(--primary-red);">
                            <div>
                                <div style="font-weight:700; color:white; font-size:15px;">User Name</div>
                                <div style="font-size:11px; color:#777;">Premium Member</div>
                            </div>
                        </div>
                        <div class="profile-email">user@moviesflix.com</div>
                    </div>
                    <button class="dropdown-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        Manage Profiles
                    </button>
                    <button class="dropdown-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        Account
                    </button>
                    <button class="dropdown-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Help Center
                    </button>
                    <div style="height:1px; background:rgba(255,255,255,0.05); margin:5px 0;"></div>
                    <button class="dropdown-item signout-btn" onclick="signOut()">Sign out of MoviesFlix</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Hero Section -->
        <section class="hero" id="hero">
            <div class="hero-video-bg" id="hero-video-container"></div>
            <div class="hero-content">
                <div class="hero-title" id="h-title">Loading...</div>
                <div class="hero-meta" id="h-meta"></div>
                <div class="hero-desc" id="h-desc"></div>
                <div class="hero-buttons">
                    <button class="btn btn-play" onclick="playHero()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        Play
                    </button>
                    <button class="btn btn-more" onclick="playHero()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        More Info
                    </button>
                </div>
            </div>
        </section>

        <!-- Content Rows Container -->
        <div id="content-rows">
            <!-- Skeleton Loaders -->
            <div class="skeleton-row">
                <div class="skeleton-container">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
            <div class="skeleton-row">
                <div class="skeleton-container">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div class="modal-overlay" id="videoModal">
        <div class="modal-close" onclick="closeModal()">&#10005;</div>

        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-video-wrapper">
                <iframe id="youtube-player" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </div>
            <div class="modal-details">
                <div class="modal-title" id="m-title">Title</div>
                <div class="modal-meta">
                    <span class="match-score" id="m-match">98% Match</span>
                    <span id="m-year">2024</span>
                    <span style="border:1px solid #555; padding:0 5px; font-size:12px;">HD</span>
                </div>
                <div class="modal-desc" id="m-desc">Description...</div>
                <div class="modal-extra">
                    <div><span>Cast:</span> <span id="m-cast" style="color:#ddd">-</span></div>
                    <div><span>Genres:</span> <span id="m-genre" style="color:#ddd">-</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast">Notification</div>

    <script>
        // --- CONFIGURATION ---
        const API_URL = 'https://65e7305153d564627a8fcf89.mockapi.io/moviesflix/movies';
        let allMovies = [];
        let isLoaded = false;

        // --- DATA ---
        const FALLBACK_DATA = [
            {
                id: "1",
                title: "Akhanda",
                description: "A fearless revolutionary fights against injustice with divine power.",
                type: "movie",
                genre: "Action, Fantasy",
                language: "Telugu",
                match: 99, year: "2021",
                cast: "Balakrishna, Pragya Jaiswal",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=2mt6f8rIEi4",
                thumbnail: "https://i.ytimg.com/vi/2mt6f8rIEi4/mqdefault.jpg"
            },

            {
                id: "2",
                title: "RRR",
                description: "Two revolutionaries fight against British rule in India.",
                type: "movie",
                genre: "Action, Drama",
                language: "Telugu",
                match: 98,
                year: "2022",
                cast: "NTR, Ram Charan",
                isKids: false,
                videoUrl: "https://youtu.be/NgBoMJy386M?si=TgWkTUyyFxsCl8y3",
                thumbnail: "https://i.ytimg.com/vi/NgBoMJy386M/mqdefault.jpg"
            },
            {
                id: "3",
                title: "Baahubali: The Beginning",
                description: "An intrepid young man falls in love with a warrior princess.",
                type: "movie",
                genre: "Epic, Action",
                language: "Hindi",
                match: 97,
                year: "2015",
                cast: "Prabhas, Rana",
                isKids: false,
                videoUrl: "https://youtu.be/JPT2-Z_CVHw?si=YpQb3n1NTKu58Qun",
                thumbnail: "https://th.bing.com/th/id/R.59a2b6da86226824945828e627dc7dcb?rik=zGnYOLOCJs5RyQ&riu=http%3a%2f%2fwww.impawards.com%2fintl%2findia%2f2015%2fposters%2fbahubali_the_beginning_ver11_xlg.jpg&ehk=8%2faJjhVDhyt22OOabK0QghXuxvgEjMBRR7Yl5%2baKpIU%3d&risl=&pid=ImgRaw&r=0"
            },
            {
                id: "4",
                title: "Devara",
                description: "Epic sea-based action entertainer coming soon.",
                type: "movie",
                genre: "Action, Drama",
                language: "Telugu",
                match: 91,
                year: "2024",
                cast: "Jr NTR, Janhvi Kapoor",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=5cx7rvMvAWo",
                thumbnail: "https://i.ytimg.com/vi/5cx7rvMvAWo/mqdefault.jpg"
            },
            {
                id: "5",
                title: "Pushpa: The Rise",
                description: "Rise of a red sandalwood smuggler.",
                type: "movie",
                genre: "Action, Thriller",
                language: "Hindi",
                match: 95,
                year: "2021",
                cast: "Allu Arjun, Rashmika",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=pKctjlxbFDQ",
                thumbnail: "https://i.ytimg.com/vi/pKctjlxbFDQ/mqdefault.jpg"
            },
            {
                id: "7",
                title: "Interstellar",
                description: "Explorers travel through a wormhole in space.",
                type: "movie",
                genre: "Sci-Fi, Adventure",
                language: "English",
                match: 98,
                year: "2014",
                cast: "Matthew McConaughey, Anne Hathaway",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=zSWdZVtXT7E",
                thumbnail: "https://i.ytimg.com/vi/zSWdZVtXT7E/mqdefault.jpg"
            },
            {
                id: "8",
                title: "Inception",
                description: "A thief who steals corporate secrets through dream-sharing.",
                type: "movie",
                genre: "Sci-Fi, Thriller",
                language: "English",
                match: 97,
                year: "2010",
                cast: "Leonardo DiCaprio",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=YoHD9XEInc0",
                thumbnail: "https://i.ytimg.com/vi/YoHD9XEInc0/mqdefault.jpg"
            },
            {
                id: "9",
                title: "Avengers: Endgame",
                description: "The Avengers assemble once more to reverse Thanos's actions.",
                type: "movie",
                genre: "Action, Superhero",
                language: "English",
                match: 96,
                year: "2019",
                cast: "Robert Downey Jr.",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=TcMBFSGVi1c",
                thumbnail: "https://i.ytimg.com/vi/TcMBFSGVi1c/mqdefault.jpg"
            },
            {
                id: "10",
                title: "Stranger Things",
                description: "A small town uncovers a dark mystery involving secret experiments.",
                type: "tv",
                genre: "Sci-Fi, Horror",
                language: "English",
                match: 96,
                year: "2016",
                cast: "Millie Bobby Brown",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=b9EkMc79ZSU",
                thumbnail: "https://i.ytimg.com/vi/b9EkMc79ZSU/mqdefault.jpg"
            },
            {
                id: "11",
                title: "Money Heist",
                description: "A gang plans the biggest heist in recorded history.",
                type: "tv",
                genre: "Crime, Thriller",
                language: "English",
                match: 95,
                year: "2017",
                cast: "Alvaro Morte",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=_InqQJRqGW4",
                thumbnail: "https://i.ytimg.com/vi/_InqQJRqGW4/mqdefault.jpg"
            },
            {
                id: "12",
                title: "Peppa Pig",
                description: "Adventures of Peppa and her family.",
                type: "tv",
                genre: "Animation, Kids",
                language: "English",
                match: 90,
                year: "2004",
                cast: "Peppa",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=8Cw9T05qfnw",
                thumbnail: "https://i.ytimg.com/vi/8Cw9T05qfnw/mqdefault.jpg"
            },
            {
                id: "102",
                title: "Chhota Bheem",
                description: "Adventures of Bheem in Dholakpur.",
                type: "tv",
                genre: "Animation, Kids",
                language: "Hindi",
                match: 92,
                year: "2008",
                cast: "Bheem",
                isKids: true,
                videoUrl: "https://youtu.be/q-rB-JXT6xg?si=YIAktuR1iICfFhCf",
                thumbnail: "https://th.bing.com/th/id/OIP.3vzl97qyL8iFVsZB-9EZwwHaEK?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3"
            },
            {
                id: "104",
                title: "Tom and Jerry",
                description: "Classic cat and mouse chase.",
                type: "tv",
                genre: "Animation, Comedy",
                language: "English",
                match: 94,
                year: "1940",
                cast: "Tom, Jerry",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=t0Q2otsqC4I",
                thumbnail: "https://i.ytimg.com/vi/t0Q2otsqC4I/mqdefault.jpg"
            },

            {
                id: "13",
                title: "Kingdom",
                description: "Epic action drama starring Vijay Deverakonda in a powerful role.",
                type: "movie",
                genre: "Action, Drama",
                language: "Telugu",
                match: 94,
                year: "2025",
                cast: "Vijay Deverakonda",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=McPGQ-Nb9Uk",
                thumbnail: "https://i.ytimg.com/vi/McPGQ-Nb9Uk/mqdefault.jpg"
            },
            {
                id: "14",
                title: "Robinhood",
                description: "Nithiin stars in this action-packed entertainer with social message.",
                type: "movie",
                genre: "Action, Drama",
                language: "Telugu",
                match: 92,
                year: "2025",
                cast: "Nithiin, Sreeleela",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=NfsTxYtBiWg",
                thumbnail: "https://i.ytimg.com/vi/NfsTxYtBiWg/mqdefault.jpg"
            },
            {
                id: "15",
                title: "Eagle",
                description: "Ravi Teja in a high-octane action thriller.",
                type: "movie",
                genre: "Action, Thriller",
                language: "Telugu",
                match: 93,
                year: "2024",
                cast: "Ravi Teja, Anupama Parameswaran",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=2sX0lElZKQE",
                thumbnail: "https://i.ytimg.com/vi/2sX0lElZKQE/mqdefault.jpg"
            },
            {
                id: "16",
                title: "Dragon",
                description: "Romantic action drama with Pradeep Ranganathan and Anupama Parameswaran.",
                type: "movie",
                genre: "Action, Romance",
                language: "Telugu",
                match: 91,
                year: "2025",
                cast: "Pradeep Ranganathan, Anupama Parameswaran",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=m1i-sYxTX8I",
                thumbnail: "https://i.ytimg.com/vi/m1i-sYxTX8I/mqdefault.jpg"
            },
            {
                id: "17",
                title: "Oppenheimer",
                description: "The story of the man who developed the atomic bomb.",
                type: "movie",
                genre: "Biography, Drama, History",
                language: "English",
                match: 98,
                year: "2023",
                cast: "Cillian Murphy, Emily Blunt",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=uYPbbksJxIg",
                thumbnail: "https://i.ytimg.com/vi/uYPbbksJxIg/mqdefault.jpg"
            },
            {
                id: "18",
                title: "Dune: Part Two",
                description: "Paul Atreides unites with Chani and the Fremen for revenge.",
                type: "movie",
                genre: "Sci-Fi, Adventure",
                language: "English",
                match: 97,
                year: "2024",
                cast: "Timoth√©e Chalamet, Zendaya",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=_YUzQa_0SLs",
                thumbnail: "https://i.ytimg.com/vi/_YUzQa_0SLs/mqdefault.jpg"
            },
            {
                id: "19",
                title: "Deadpool & Wolverine",
                description: "Deadpool teams up with Wolverine in a multiverse adventure.",
                type: "movie",
                genre: "Action, Comedy, Superhero",
                language: "English",
                match: 96,
                year: "2024",
                cast: "Ryan Reynolds, Hugh Jackman",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=73_1biulkYk",
                thumbnail: "https://i.ytimg.com/vi/73_1biulkYk/mqdefault.jpg"
            },
            {
                id: "20",
                title: "The Amazing Digital Circus",
                description: "Surreal animated series about characters trapped in a digital world.",
                type: "tv",
                genre: "Animation, Adventure, Comedy",
                language: "English",
                match: 94,
                year: "2023",
                cast: "Gooseworx (creator)",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=ey3lSw1QPVw",
                thumbnail: "https://i.ytimg.com/vi/ey3lSw1QPVw/mqdefault.jpg"
            },
            {
                id: "21",
                title: "Bluey",
                description: "Heartwarming adventures of Bluey, a blue heeler puppy, and her family.",
                type: "tv",
                genre: "Animation, Family, Kids",
                language: "English",
                match: 95,
                year: "2018",
                cast: "Bluey",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=4x2LugQuZ4w",
                thumbnail: "https://i.ytimg.com/vi/4x2LugQuZ4w/mqdefault.jpg"
            },
            {
                id: "22",
                title: "Cocomelon",
                description: "Fun educational songs and nursery rhymes for little ones.",
                type: "tv",
                genre: "Animation, Kids, Music",
                language: "English",
                match: 93,
                year: "2006",
                cast: "JJ and family",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=j4rti6vG3xI",
                thumbnail: "https://i.ytimg.com/vi/j4rti6vG3xI/mqdefault.jpg"
            },
            {
                id: "23",
                title: "Motu Patlu",
                description: "Adventures of two funny friends in Furfuri Nagar.",
                type: "tv",
                genre: "Animation, Comedy, Kids",
                language: "Hindi",
                match: 92,
                year: "2012",
                cast: "Motu, Patlu",
                isKids: true,
                videoUrl: "https://youtu.be/m-A72YpNl-U?si=tCQLSAHc6OsBJCG-",
                thumbnail: "https://th.bing.com/th/id/OIP.KiBAWpNAvvGHlJkf6CrWXAHaEv?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3"
            },
            {
                id: "24",
                title: "Squid Game Season 2",
                description: "Gi-hun returns to end the deadly games once and for all.",
                type: "tv",
                genre: "Thriller, Drama",
                language: "Korean (dubbed/subbed)",
                match: 96,
                year: "2024",
                cast: "Lee Jung-jae",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=0v0gOr53mZ0",
                thumbnail: "https://i.ytimg.com/vi/0v0gOr53mZ0/mqdefault.jpg"
            },
            {
                id: "25",
                title: "The Raja Saab",
                description: "Prabhas in a horror-fantasy adventure with romance and thrills.",
                type: "movie",
                genre: "Horror, Fantasy, Action",
                language: "Telugu",
                match: 96,
                year: "2026",
                cast: "Prabhas, Malavika Mohanan",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=i-8w5yDwukA",
                thumbnail: "https://i.ytimg.com/vi/i-8w5yDwukA/mqdefault.jpg"
            },
            {
                id: "26",
                title: "Bhartha Mahasayulaku Wignyapthi",
                description: "Ravi Teja in a hilarious comedy entertainer for Sankranthi.",
                type: "movie",
                genre: "Comedy, Drama",
                language: "Telugu",
                match: 93,
                year: "2026",
                cast: "Ravi Teja, Ashika Ranganath, Dimple Hayathi",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=z7PJpctfx3Q",
                thumbnail: "https://i.ytimg.com/vi/z7PJpctfx3Q/mqdefault.jpg"
            },
            {
                id: "27",
                title: "Ghaati",
                description: "Anushka Shetty in a powerful rural drama with intense action.",
                type: "movie",
                genre: "Drama, Action",
                language: "Telugu",
                match: 94,
                year: "2025",
                cast: "Anushka Shetty, Vikram Prabhu",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=cHd-vTYZ87A",
                thumbnail: "https://i.ytimg.com/vi/cHd-vTYZ87A/mqdefault.jpg"
            },
            {
                id: "28",
                title: "Anaganaga Oka Raju",
                description: "Naveen Polishetty and Meenakshi in a romantic comedy drama.",
                type: "movie",
                genre: "Romance, Comedy",
                language: "Telugu",
                match: 92,
                year: "2026",
                cast: "Naveen Polishetty, Meenakshi Chaudhary",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=GSGVbEZHgSQ",
                thumbnail: "https://i.ytimg.com/vi/GSGVbEZHgSQ/mqdefault.jpg"
            },
            {
                id: "29",
                title: "Project Hail Mary",
                description: "Sci-fi adventure with Ryan Gosling on an impossible space mission (Telugu dubbed trailer).",
                type: "movie",
                genre: "Sci-Fi, Adventure",
                language: "English",
                match: 95,
                year: "2026",
                cast: "Ryan Gosling",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=ncSAGOIl-mQ",
                thumbnail: "https://i.ytimg.com/vi/ncSAGOIl-mQ/mqdefault.jpg"
            },
            {
                id: "30",
                title: "The Running Man",
                description: "High-stakes action thriller remake with intense survival hunt (Telugu trailer).",
                type: "movie",
                genre: "Action, Thriller",
                language: "English",
                match: 93,
                year: "2025",
                cast: "Glen Powell",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=6ZE6J7HN_Uk",
                thumbnail: "https://i.ytimg.com/vi/6ZE6J7HN_Uk/mqdefault.jpg"
            },
            {
                id: "31",
                title: "Zootopia 2",
                description: "Judy Hopps and Nick Wilde return for more animated adventures.",
                type: "movie",
                genre: "Animation, Comedy, Adventure",
                language: "English",
                match: 94,
                year: "2025",
                cast: "Ginnifer Goodwin, Jason Bateman",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=some-trailer-id-for-zootopia2",
                thumbnail: "https://i.ytimg.com/vi/placeholder/mqdefault.jpg"
            },
            {
                id: "32",
                title: "Shrek 5",
                description: "Ogre family fun continues in the next chapter of the beloved series.",
                type: "movie",
                genre: "Animation, Comedy, Family",
                language: "English",
                match: 92,
                year: "2026",
                cast: "Mike Myers, Eddie Murphy",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=example-shrek5",
                thumbnail: "https://i.ytimg.com/vi/example/mqdefault.jpg"
            },
            {
                id: "33",
                title: "Lilo & Stitch",
                description: "Live-action remake of the classic alien-family story.",
                type: "movie",
                genre: "Adventure, Family",
                language: "English",
                match: 91,
                year: "2025",
                cast: "Maia Kealoha, Sydney Elizebeth Agudong",
                isKids: true,
                videoUrl: "https://www.youtube.com/watch?v=example-lilo",
                thumbnail: "https://i.ytimg.com/vi/example/mqdefault.jpg"
            },
            {
                id: "34",
                title: "How to Train Your Dragon (Live-Action)",
                description: "Epic friendship between a boy and his dragon in live-action.",
                type: "movie",
                genre: "Adventure, Fantasy",
                language: "English",
                match: 93,
                year: "2025",
                cast: "Mason Thames, Nico Parker",
                isKids: false,
                videoUrl: "https://www.youtube.com/watch?v=example-httyd",
                thumbnail: "https://i.ytimg.com/vi/example/mqdefault.jpg"
            }
        ];

        // --- DOM ---
        const contentRows = document.getElementById('content-rows');
        const navbar = document.getElementById('navbar');
        const modal = document.getElementById('videoModal');
        const iframe = document.getElementById('youtube-player');

        async function init() {
            setupScrollEffect();
            await loadData();
            setupSearch();
        }

        // --- DATA FETCHING ---
        async function loadData() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error("API Error");
                const data = await response.json();
                allMovies = data;
            } catch (error) {
                console.warn("Using fallback data");
                allMovies = FALLBACK_DATA;
            }
            isLoaded = true;
            handleNav('home');
        }

        // --- NAVIGATION ---
        function handleNav(category, event) {
            // Prevent default anchor behavior if triggered by link click
            if (event) event.preventDefault();

            // 1. Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));

            // 2. Manually find and activate the link matching the category
            // This ensures the header updates correctly whether clicked from Nav or "See All"
            const targetLink = document.querySelector(`.nav-link[onclick*="'${category}'"]`);
            if (targetLink) {
                targetLink.classList.add('active');
            } else if (category === 'home') {
                // Fallback for home if specific link finding fails
                const homeLink = document.querySelector('.nav-link[onclick*="home"]');
                if (homeLink) homeLink.classList.add('active');
            }

            closeSearch();
            if (!isLoaded) return;

            if (category === 'home') {
                renderHome();
            } else {
                let filteredData = [];
                if (category === 'tv') filteredData = allMovies.filter(m => m.type === 'tv');
                else if (category === 'kids') filteredData = allMovies.filter(m => m.isKids);
                else if (category === 'telugu') filteredData = allMovies.filter(m => m.language === 'Telugu');
                else if (category === 'hindi') filteredData = allMovies.filter(m => m.language === 'Hindi');
                else if (category === 'movies') filteredData = allMovies.filter(m => m.type === 'movie');

                renderGrid(category.toUpperCase(), filteredData);
            }
        }

        // --- RENDERERS ---
        function renderHome() {
            const hero = document.getElementById('hero');
            const main = document.getElementById('mainContent');
            hero.classList.remove('hidden');
            main.classList.remove('no-hero');
            const topRated = [...allMovies].sort((a, b) => b.match - a.match)[0];
            updateHero(topRated);

            let html = '';
            const history = JSON.parse(localStorage.getItem('watchHistory') || '[]');
            if (history.length > 0) {
                const watchedMovies = allMovies.filter(m => history.includes(m.id));
                if (watchedMovies.length > 0) html += createRow("Continue Watching", watchedMovies, null, true);
            }
            // Note: 'home' passed for "Latest Top Rating" so 'See All' goes to Home
            html += createRow("Latest Top Rating", [...allMovies].sort((a, b) => b.match - a.match), 'home');
            html += createRow("Trending in Telugu", allMovies.filter(m => m.language === 'Telugu'), 'telugu');
            html += createRow("Kids & Family", allMovies.filter(m => m.isKids), 'kids');
            html += createRow("Binge Worthy TV Shows", allMovies.filter(m => m.type === 'tv'), 'tv');

            contentRows.innerHTML = html;
        }

        function renderGrid(title, movies) {
            const hero = document.getElementById('hero');
            const main = document.getElementById('mainContent');
            hero.classList.add('hidden');
            main.classList.add('no-hero');
            if (movies.length === 0) {
                contentRows.innerHTML = `<div style="padding:60px; color:#777; text-align:center; font-size:1.5rem; font-weight:300;">No titles found in this category.</div>`;
                return;
            }
            let cardsHtml = '';
            movies.forEach(movie => {
                const thumb = movie.thumbnail || `https://picsum.photos/seed/${movie.id}/300/169`;
                cardsHtml += createCardHtml(movie, thumb);
            });
            contentRows.innerHTML = `
                <div style="padding: 0 4%; margin-bottom: 20px;">
                    <h2 style="color:white; font-size:2rem; font-family:'Oswald', sans-serif; text-transform:uppercase; border-left: 4px solid var(--primary-red); padding-left: 15px;">${title}</h2>
                </div>
                <div class="grid-view">
                    ${cardsHtml}
                </div>
            `;
        }

        // Updated to accept 'category' parameter
        function createRow(title, movies, category = null, isHistory = false) {
            if (movies.length === 0) return '';
            let cardsHtml = '';
            movies.forEach(movie => {
                const thumb = movie.thumbnail || `https://picsum.photos/seed/${movie.id}/300/169`;
                const progressHtml = isHistory ? `<div class="progress-bar-container"><div class="progress-bar-fill" style="width: ${Math.floor(Math.random() * 80) + 10}%"></div></div>` : '';
                cardsHtml += createCardHtml(movie, thumb, progressHtml);
            });

            // Only render "See All" button if a category is provided
            let seeAllHtml = '';
            if (category) {
                seeAllHtml = `<div class="view-all" onclick="handleNav('${category}', event)">See All <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div>`;
            }

            return `
                <section class="row">
                    <div class="row-header">
                        <h3 class="row-title">${title}</h3>
                        ${seeAllHtml}
                    </div>
                    <div class="row-wrapper">
                        <button class="slider-arrow left" onclick="slideRow(this, -1)">‚Äπ</button>
                        <div class="row-container">
                            ${cardsHtml}
                        </div>
                        <button class="slider-arrow right" onclick="slideRow(this, 1)">‚Ä∫</button>
                    </div>
                </section>
            `;
        }

        function createCardHtml(movie, thumb, progressHtml = '') {
            const dataStr = encodeURIComponent(JSON.stringify(movie));
            return `
                <div class="card" onclick="openModal('${dataStr}')">
                    <img src="${thumb}" alt="${movie.title}" loading="lazy">
                    ${progressHtml}
                    <div class="card-info">
                        <div class="card-actions">
                            <button class="mini-btn play">
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                            </button>
                            <button class="mini-btn" onclick="event.stopPropagation(); addToMyList('${movie.id}')">
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            </button>
                            <button class="mini-btn">
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                            </button>
                        </div>
                        <div class="card-title">${movie.title}</div>
                        <div class="card-meta">
                            <span>${movie.match}% Match</span>
                            <span style="color:#fff; font-weight:400; font-size:10px;">${movie.year}</span>
                        </div>
                        <div class="card-tags">
                            ${movie.isKids ? '<span class="age-badge">Kids</span>' : ''}
                            <span style="color:#fff">${movie.genre}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateHero(movie) {
            document.getElementById('h-title').innerText = movie.title;
            document.getElementById('h-desc').innerText = movie.description;
            document.getElementById('h-meta').innerHTML = `<span class="match-score">${movie.match}% Match</span> <span>${movie.year}</span> <span class="age-badge" style="background:rgba(255,255,255,0.2); border:none; padding:2px 6px;">${movie.isKids ? 'Kids' : 'U/A 13+'}</span>`;

            const videoId = getYouTubeId(movie.videoUrl);
            if (videoId) {
                setTimeout(() => {
                    const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&rel=0&iv_load_policy=3&disablekb=1&playsinline=1`;
                    document.getElementById('hero-video-container').innerHTML = `<iframe src="${embedUrl}" allow="autoplay; encrypted-media; fullscreen" allowfullscreen></iframe>`;
                }, 100);
            }
        }

        // --- SEARCH (DEBOUNCED) ---
        function toggleSearch() {
            const box = document.getElementById('searchBox');
            const input = document.getElementById('searchInput');
            box.classList.toggle('active');
            if (box.classList.contains('active')) input.focus();
        }

        function closeSearch() {
            document.getElementById('searchBox').classList.remove('active');
            document.getElementById('searchInput').value = '';
        }

        function setupSearch() {
            const input = document.getElementById('searchInput');
            let timeout = null;

            input.addEventListener('input', (e) => {
                clearTimeout(timeout);
                const query = e.target.value.toLowerCase();
                timeout = setTimeout(() => {
                    if (query.length > 0) {
                        const results = allMovies.filter(m => m.title.toLowerCase().includes(query));
                        renderGrid(`Search: "${query}"`, results);
                    } else {
                        handleNav('home');
                    }
                }, 300);
            });
        }

        // --- MODAL LOGIC ---
        function openModal(dataStr) {
            const movie = JSON.parse(decodeURIComponent(dataStr));
            let history = JSON.parse(localStorage.getItem('watchHistory') || '[]');
            if (!history.includes(movie.id)) {
                history.unshift(movie.id);
                localStorage.setItem('watchHistory', JSON.stringify(history));
            }
            document.getElementById('m-title').innerText = movie.title;
            document.getElementById('m-desc').innerText = movie.description;
            document.getElementById('m-year').innerText = movie.year;
            document.getElementById('m-match').innerText = movie.match + '% Match';
            document.getElementById('m-cast').innerText = movie.cast;
            document.getElementById('m-genre').innerText = movie.genre;

            const videoId = getYouTubeId(movie.videoUrl);
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&playsinline=1`;

            modal.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.remove('open');
            document.body.style.overflow = '';
            setTimeout(() => { iframe.src = ""; }, 300);
        }

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        function playHero() {
            const topRated = [...allMovies].sort((a, b) => b.match - a.match)[0];
            openModal(encodeURIComponent(JSON.stringify(topRated)));
        }

        // --- UTILS ---
        function getYouTubeId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function slideRow(btn, direction) {
            const container = btn.parentElement.querySelector('.row-container');
            const scrollAmount = window.innerWidth * 0.8;
            container.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }

        function setupScrollEffect() {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) navbar.classList.add('scrolled');
                else navbar.classList.remove('scrolled');
            });
        }

        function toggleDropdown() {
            document.getElementById('profileDropdown').classList.toggle('active');
        }
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.profile-container')) {
                document.getElementById('profileDropdown').classList.remove('active');
            }
        });

        function signOut() {
            showToast("Signed Out Successfully");
            window.location.href = 'index.html';
            setTimeout(() => window.location.reload(), 1000);
        }

        function addToMyList(id) { showToast("Added to My List"); }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        init();
    </script>
</body>

</html>